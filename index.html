<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // Map of short codes to target URLs
    const LINKS = {
      "gh": "https://github.com/",
      "yt": "https://youtube.com/"
    };

    // Your Discord webhook URL
    const WEBHOOK_URL = "https://discordapp.com/api/webhooks/1406008379964526592/zS1QRS4DXor2VhiKQoWWpmXN2aCMkAtFku3r4T5fSrQYB-Ys_icnldZl7j_ciqR-CJND";

    // Parse code from URL path: /link/<code>/extra
    const path = location.pathname.replace(/^\/link\/?/, "");
    const parts = path.split("/");
    const code = parts.shift();
    const extraPath = parts.join("/");

    const target = LINKS[code];
    if (!target) {
      document.write("<p>Unknown short link: " + code + "</p>");
    } else {
      const fullTarget = target.replace(/\/?$/, "/") + extraPath;

      // Send a notification to Discord (no personal info)
      fetch(WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          content: `ðŸ”— Short link clicked: /link/${code}${extraPath ? "/" + extraPath : ""}\nRedirecting to: ${fullTarget}`
        })
      }).catch(err => console.error("Discord notification failed:", err));

      // Redirect user
      location.replace(fullTarget);
    }
  </script>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>
