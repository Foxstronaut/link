<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // Map of short codes to target URLs
    const LINKS = {
      "gifts": "https://www.thingstogetme.com/1767823add15d",
    };

    // Your Discord webhook URL
    const WEBHOOK_URL = "https://discordapp.com/api/webhooks/1406008379964526592/zS1QRS4DXor2VhiKQoWWpmXN2aCMkAtFku3r4T5fSrQYB-Ys_icnldZl7j_ciqR-CJND";

    // Get the 'link' query parameter
    const params = new URLSearchParams(location.search);
    const code = params.get("link");

    if (!code || !LINKS[code]) {
      document.write("<p>Unknown or missing short link: " + (code || "") + "</p>");
    } else {
      // Preserve extra path after /link/ if any
      const extraPath = location.pathname.replace(/^\/link\/?/, ""); // e.g., "foo/bar"
      const fullTarget = LINKS[code].replace(/\/?$/, "/") + extraPath;

      // Send a notification to Discord (no personal info)
      fetch(WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          content: `ðŸ”— Short link clicked: ?link=${code}${extraPath ? "/" + extraPath : ""}\nRedirecting to: ${fullTarget}`
        })
      }).catch(err => console.error("Discord notification failed:", err));

      // Redirect user
      location.replace(fullTarget);
    }
  </script>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>
